<section
  class="login-wrap"
  [class.control-plane]="isControlPlanePortal()"
  [class.tenant-portal]="!isControlPlanePortal()"
>
  <div class="login-card">
    <div class="portal-badge">
      {{ isControlPlanePortal() ? "Portal Sistema" : "Portal Tenant" }}
    </div>
    <h1>{{ isControlPlanePortal() ? "Acesso Control Plane" : "Acesso ao Tenant" }}</h1>

    <div class="portal-switch" *ngIf="allowPortalToggle">
      <button
        type="button"
        [class.active]="isControlPlanePortal()"
        (click)="setPortalType('CONTROL_PLANE')"
      >
        Sistema
      </button>
      <button
        type="button"
        [class.active]="!isControlPlanePortal()"
        (click)="setPortalType('TENANT')"
      >
        Tenant
      </button>
    </div>

    <p *ngIf="isControlPlanePortal()">
      Login administrativo para gestão de tenants no subdomínio
      <strong>sistema</strong>.
    </p>
    <p *ngIf="!isControlPlanePortal()">
      Entre com usuário e senha para carregar seu contexto de tenant.
    </p>

    <label *ngIf="!isControlPlanePortal()">
      Tenant Code
      <input
        type="text"
        [ngModel]="tenantCode()"
        (ngModelChange)="tenantCode.set($event)"
      />
    </label>
    <p *ngIf="hostDetectedTenantCode && !isControlPlanePortal()" class="hint">
      Tenant detectado pelo subdomínio: <strong>{{ hostDetectedTenantCode }}</strong>
    </p>

    <label>
      Username
      <input
        type="text"
        [ngModel]="username()"
        (ngModelChange)="username.set($event)"
      />
    </label>

    <label>
      Password
      <div class="password-row">
        <input
          [type]="showPassword() ? 'text' : 'password'"
          [ngModel]="password()"
          (ngModelChange)="password.set($event)"
        />
        <button
          type="button"
          class="toggle-password"
          (click)="showPassword.set(!showPassword())"
        >
          {{ showPassword() ? "Ocultar" : "Ver" }}
        </button>
      </div>
    </label>

    <button type="button" (click)="login()" [disabled]="loading()">
      Entrar
    </button>

    <a class="forgot-link" routerLink="/forgot-password">
      Esqueci minha senha
    </a>

    <p *ngIf="loading()">Autenticando...</p>
    <p class="error" *ngIf="error()">{{ error() }}</p>
  </div>
</section>
