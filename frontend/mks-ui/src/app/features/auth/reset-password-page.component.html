<section
  class="login-wrap"
  [class.control-plane]="isControlPlanePortal()"
  [class.tenant-portal]="!isControlPlanePortal()"
>
  <div class="login-card">
    <div class="portal-badge">
      {{ isControlPlanePortal() ? "Portal Sistema" : "Portal Tenant" }}
    </div>

    <h1>Redefinir senha</h1>

    <p *ngIf="isControlPlanePortal()">
      Defina uma nova senha para sua conta do portal
      <strong>sistema</strong>.
    </p>
    <p *ngIf="!isControlPlanePortal()">
      Defina uma nova senha para sua conta no tenant atual.
    </p>

    <p *ngIf="hostDetectedTenantCode && !isControlPlanePortal()" class="hint">
      Tenant detectado pelo subdom√≠nio: <strong>{{ hostDetectedTenantCode }}</strong>
    </p>

    <label>
      Nova senha
      <div class="password-row">
        <input
          [type]="showPassword() ? 'text' : 'password'"
          autocomplete="new-password"
          [ngModel]="newPassword()"
          (ngModelChange)="newPassword.set($event)"
        />
        <button
          type="button"
          class="toggle-password"
          (click)="showPassword.set(!showPassword())"
        >
          {{ showPassword() ? "Ocultar" : "Ver" }}
        </button>
      </div>
    </label>

    <label>
      Confirmar nova senha
      <input
        [type]="showPassword() ? 'text' : 'password'"
        autocomplete="new-password"
        [ngModel]="newPasswordConfirm()"
        (ngModelChange)="newPasswordConfirm.set($event)"
      />
    </label>

    <button type="button" (click)="submit()" [disabled]="loading()">
      Atualizar senha
    </button>

    <p *ngIf="loading()">Processando...</p>
    <p class="success" *ngIf="success()">{{ success() }}</p>
    <p class="error" *ngIf="error()">{{ error() }}</p>

    <button type="button" class="secondary" (click)="goToLogin()">
      Ir para login
    </button>
  </div>
</section>

