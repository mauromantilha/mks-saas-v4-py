DEBUG=False
SECRET_KEY=
ALLOWED_HOSTS=localhost,127.0.0.1,testserver,.localhost,.mksbrasil.com

# CORS / CSRF - MUST be configured for production
# Only allow your frontend domain(s)
CORS_ALLOWED_ORIGINS=https://app.example.com
CSRF_TRUSTED_ORIGINS=https://app.example.com,https://www.example.com

# Finance/Fiscal (NF)
# Resolver that maps an invoice_id into a provider-agnostic payload for emission.
# Use the mock resolver for local dev until you integrate with the real finance invoice model.
FISCAL_INVOICE_RESOLVER=finance.fiscal.resolvers.mock.mock_invoice_resolver
FISCAL_ADAPTER_TIMEOUT_SECONDS=30
# Shared secret used to validate provider webhooks (HMAC SHA256).
FISCAL_WEBHOOK_SECRET=change-me
# Shared token used by internal monitoring heartbeat endpoint.
MONITORING_INGEST_TOKEN=change-me-monitoring-token
CONTROL_PLANE_ALERT_HEARTBEAT_MINUTES=15
CONTROL_PLANE_ALERT_HIGH_ERROR_RATE=0.10

# Tenant resolution
TENANT_ID_HEADER=X-Tenant-ID
TENANT_BASE_DOMAIN=mksbrasil.com
TENANT_REQUIRED_PATH_PREFIXES=/api/
TENANT_EXEMPT_PATH_PREFIXES=/api/auth/token/,/api/auth/me/,/api/auth/password-reset/request/,/api/auth/password-reset/confirm/
TENANT_SUSPENSION_EXEMPT_PATH_PREFIXES=/api/auth/token/,/api/auth/password-reset/request/,/api/auth/password-reset/confirm/
TENANT_PUBLIC_HOSTS=localhost,127.0.0.1,testserver,sistema.mksbrasil.com
TENANT_RESERVED_SUBDOMAINS=sistema,www,api,admin,static,media
# Optional global RBAC override JSON (applies to all tenants)
# TENANT_ROLE_MATRICES={"apolices":{"POST":["OWNER","MANAGER"]}}

# Database (schema-per-tenant via django-tenants)
DATABASE_ENGINE=django_tenants.postgresql_backend
DATABASE_NAME=mks_db
DATABASE_USER=mks_user
DATABASE_PASSWORD=mks_password
DATABASE_HOST=127.0.0.1
DATABASE_PORT=5432
DATABASE_CONN_MAX_AGE=60
DATABASE_SSLMODE=disable

# Cloud SQL (optional). If set, Django uses unix socket /cloudsql/<instance>
# CLOUD_SQL_INSTANCE=your-project:your-region:your-instance

# Secret Manager (optional). Used only if plaintext values are empty.
# DATABASE_PASSWORD_SECRET=projects/<project-id>/secrets/<db-password-secret>
# DJANGO_SECRET_KEY_SECRET=projects/<project-id>/secrets/<django-secret-key>

# Control Plane provisioning
# noop | local_postgres | cloudsql_postgres
CONTROL_PLANE_PROVISIONER=noop
CONTROL_PLANE_SUBDOMAIN=sistema
CONTROL_PLANE_HOST=sistema.mksbrasil.com
CONTROL_PLANE_ALLOWED_HOSTS=localhost,127.0.0.1,testserver,sistema.mksbrasil.com
CONTROL_PANEL_ALLOW_STAFF_FALLBACK=False
CONTROL_PLANE_PORTAL_URL_TEMPLATE=https://{subdomain}.mksbrasil.com
CONTROL_PLANE_SOFT_DELETE_RETENTION_DAYS=90
TENANT_RATE_LIMIT_CACHE_SECONDS=70
# Required only when CONTROL_PLANE_PROVISIONER=local_postgres
CONTROL_PLANE_LOCAL_DB_ADMIN_DATABASE=postgres
CONTROL_PLANE_LOCAL_DB_ADMIN_USER=
CONTROL_PLANE_LOCAL_DB_ADMIN_PASSWORD=
CONTROL_PLANE_LOCAL_DB_ADMIN_HOST=127.0.0.1
CONTROL_PLANE_LOCAL_DB_ADMIN_PORT=5432
CONTROL_PLANE_LOCAL_DB_PASSWORD_DEFAULT=change-me-tenant-password
# Required only when CONTROL_PLANE_PROVISIONER=cloudsql_postgres
# For Cloud Run + Cloud SQL socket:
# CONTROL_PLANE_CLOUDSQL_ADMIN_HOST=/cloudsql/<project>:<region>:<instance>
CONTROL_PLANE_CLOUDSQL_ADMIN_DATABASE=postgres
CONTROL_PLANE_CLOUDSQL_ADMIN_USER=
CONTROL_PLANE_CLOUDSQL_ADMIN_PASSWORD=
CONTROL_PLANE_CLOUDSQL_ADMIN_HOST=
CONTROL_PLANE_CLOUDSQL_ADMIN_PORT=5432
CONTROL_PLANE_CLOUDSQL_ADMIN_SSLMODE=disable
CONTROL_PLANE_CLOUDSQL_TENANT_PASSWORD_DEFAULT=change-me-tenant-password

# Resend (Control Panel contract emails)
RESEND_API_KEY=
RESEND_FROM_EMAIL=no-reply@mksbrasil.com

# Security hardening (recommended for production)
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
CSRF_COOKIE_HTTPONLY=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_REFERRER_POLICY=same-origin
X_FRAME_OPTIONS=DENY

# Local test alternative
# DATABASE_ENGINE=django.db.backends.sqlite3
# SQLITE_NAME=:memory:
